# override default cmf dynamic router with our implementation (with support for Meta Article)
parameters:
    cmf_routing.dynamic_router.class: SWP\Bundle\WebRendererBundle\Routing\MetaRouter

services:
    swp_webrenderer.listener.active_theme:
        class: SWP\Bundle\WebRendererBundle\EventListener\ActiveThemeListener
        arguments:
            - "@sylius.repository.theme"
            - "@sylius.context.theme"
            - "@swp_multi_tenancy.tenant_context"
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }

    swp_webrenderer.detection.device_detection:
        class: SWP\Bundle\WebRendererBundle\Detection\DeviceDetection

    sylius.theme.locator.application_resource:
        class: SWP\Bundle\WebRendererBundle\Locator\ApplicationResourceLocator
        arguments:
            - "@filesystem"
            - "@swp_webrenderer.detection.device_detection"

    sylius.theme.locator.bundle_resource:
        class: SWP\Bundle\WebRendererBundle\Locator\BundleResourceLocator
        arguments:
            - "@filesystem"
            - "@kernel"
            - "@swp_webrenderer.detection.device_detection"
